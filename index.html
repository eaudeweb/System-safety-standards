<!DOCTYPE html>
<html>

<head>
  <title>System safety standards</title>
  <meta charset="utf-8" />
  <!-- Add this to <head> -->
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css" />

  <script src="https://unpkg.com/vue"></script>

  <!-- Add this after vue.js -->
  <script src="//unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
  <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>

  <!-- <script src="https://apis.google.com/js/api.js"></script> -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <!-- google api sheets -->
  <script src="https://apis.google.com/js/api.js"></script>
</head>

<body>

  <!--Add buttons to initiate auth sequence and sign out-->
  <button id="authorize_button" style="display: none;">Authorize</button>
  <button id="signout_button" style="display: none;">Sign Out</button>

  <!-- Vue app -->
  <div id="app">
  
    <!-- Table -->
    <b-container fluid>
      <!-- User Interface controls -->
      <b-row>
        <b-col md="6" class="my-1">
          <b-form-group horizontal label="Search" class="mb-0">
            <b-input-group>
              <b-form-input v-model="filter" placeholder="Type to Search" />
              <b-input-group-append>
                <b-btn :disabled="!filter" @click="filter = ''">Clear</b-btn>
              </b-input-group-append>
            </b-input-group>
          </b-form-group>
        </b-col>
        <b-col md="6" class="my-1">
          <b-form-group horizontal label="Per page" class="mb-0">
            <b-form-select :options="pageOptions" v-model="perPage" />
          </b-form-group>
        </b-col>
      </b-row>

      <b-row>
        <b-col md="4" class="my-1">
          <b-form-group horizontal label="Filter by " class="mb-0">
            <b-form-select v-model="selectedLabel1">
              <option :value="null" selected>{{labelNames[0]}}</option>
              <option v-for="item in labels[labelNames[0]]" :value="item">{{item}}</option>
            </b-form-select>
          </b-form-group>
        </b-col>
        <b-col md="4" class="my-1">
          <b-form-group horizontal label="Filter by " class="mb-0">
            <b-form-select v-model="selectedLabel2" />
              <option :value="null" selected>{{labelNames[1]}}</option>
              <option v-for="item in labels[labelNames[1]]" :value="item">{{item}}</option>
            </b-form-select>
          </b-form-group>
        </b-col>
        <b-col md="4" class="my-1">
          <b-form-group horizontal label="Filter by " class="mb-0">
            <b-form-select v-model="selectedType" />
              <option :value="null" selected>Standard Type</option>
              <option v-for="item in standardTypes" :value="item">{{item}}</option>
            </b-form-select>
          </b-form-group>
        </b-col>
      </b-row>

      <!-- Main table element -->
      <b-table show-empty stacked="md"
        :items="filteredItems"
        :fields="fields"
        :current-page="currentPage"
        :per-page="perPage"
        :filter="filter"
        @filtered="onFiltered"
      >
        <template slot="Market sectors" slot-scope="row">
          <b-badge v-for="(value, key) in row.item['Market sectors']" variant="success">{{ value }}</b-badge>
        </template>
        
        <template slot="Life cycle stages" slot-scope="row">
          <b-badge v-for="(value, key) in row.item['Life cycle stages']" variant="primary">{{ value }}</b-badge>
        </template>
      </b-table>

      <b-row>
        <b-col md="6" class="my-1">
          <b-pagination :total-rows="totalRows" :per-page="perPage" v-model="currentPage" class="my-0" />
        </b-col>
      </b-row>

    </b-container>

  </div>

  <script src="main.js"></script>

</body>

</html>