<!DOCTYPE html>
<html>

<head>
  <title>System safety standards</title>
  <meta charset="utf-8" />
  <!-- Add this to <head> -->
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css" />
  <link type="text/css" rel="stylesheet" href="style.css" />

  <script src="https://unpkg.com/vue"></script>

  <!-- Add this after vue.js -->
  <script src="//unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
  <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>

</head>

<body>

  <!-- Vue app -->
  <div id="app" v-cloak>
  
    <!-- Table -->
    <b-container fluid>
      <!-- User Interface controls -->
      <b-row>
        <b-col md="4" class="my-1">
          <b-form-group horizontal label="Search" class="mb-0">
            <b-input-group>
              <b-form-input v-model="filter" placeholder="Type to Search" />
              <b-input-group-append>
                <b-btn :disabled="!filter" @click="filter = ''">Clear</b-btn>
              </b-input-group-append>
            </b-input-group>
          </b-form-group>
        </b-col>
        <b-col md="4" class="my-1">
          <b-form-group horizontal label="Page size" class="mb-0">
            <b-form-select :options="pageOptions" v-model="perPage" />
          </b-form-group>
        </b-col>
        <b-col md="4" class="my-1">
          <b-button size="md" style="float: right;" @click="onResetFilters" variant="outline-primary" class="mb-0">
            Reset filters
          </b-button>
        </b-col>
      </b-row>

      <b-row>
        <b-col md="4" class="my-1">
          <b-form-group horizontal :label="labelNames[0]" class="mb-0">
            <b-form-select v-model="selectedLabel1">
              <option :value="null" selected>All {{labelNames[0].toLowerCase()}}</option>
              <option v-for="item in labels[labelNames[0]]" :value="item">{{item}}</option>
            </b-form-select>
          </b-form-group>
        </b-col>
        <b-col md="4" class="my-1">
          <b-form-group horizontal :label="labelNames[1]" class="mb-0">
            <b-form-select v-model="selectedLabel2" />
            <option :value="null" selected>All {{labelNames[1].toLowerCase()}}</option>
            <option v-for="item in labels[labelNames[1]]" :value="item">{{item}}</option>
            </b-form-select>
          </b-form-group>
        </b-col>
        <b-col md="4" class="my-1">
          <b-form-group horizontal label="Type" class="mb-0">
            <b-form-select v-model="selectedType" />
            <option :value="null" selected>All types...</option>
            <option v-for="item in standardTypes" :value="item">{{item}}</option>
            </b-form-select>
          </b-form-group>
        </b-col>
      </b-row>

      <!-- Main table element -->
      <b-table show-empty stacked="md"
        :items="filteredItems"
        :headers="headers"
        :current-page="currentPage"
        :per-page="perPage"
        :filter="filter"
        @filtered="onFiltered"
      >
        <template :slot="labelNames[0]" slot-scope="row">
          <b-badge
            href="#"
            v-for="(value, key) in row.item[labelNames[0]]"
            @click="onFilterByLabel1(value)"
            variant="success"
          >{{ value }}</b-badge>
        </template>
        
        <template :slot="labelNames[1]" slot-scope="row">
          <b-badge
            href="#"
            v-for="(value, key) in row.item[labelNames[1]]"
            @click="onFilterByLabel2(value)"
            variant="primary"
          >{{ value }}</b-badge>
        </template>
      </b-table>

      <b-row>
        <b-col md="6" class="my-1">
          <b-pagination :total-rows="totalRows" :per-page="perPage" v-model="currentPage" class="my-0" />
        </b-col>
      </b-row>

    </b-container>

  </div>

  <script src="main.js"></script>
</body>

</html>